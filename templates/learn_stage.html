{% extends "base.html" %}

{% block content %}
<div class="stage-container">
    <h2>Stage {{ stage_num }}: {{ stage_name }}</h2>
    <p><em>{{ stage_description }}</em></p>

    <div class="media">
        {% if stage.media_type == "video" %}
            <iframe
                width="560"
                height="315"
                src="https://www.youtube.com/embed/{{ stage.video_id }}?start={{ stage.start }}&end={{ stage.end }}&rel=0"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        {% elif stage.media_type == "image" %}
            <img src="{{ stage.media_url }}" alt="{{ stage.name }}" width="560" height="315">
        {% endif %}
    </div>

    <p class="caption">{{ stage.caption }}</p>

    <div class="nav-buttons">
        {% if stage_num > 1 %}
            <a href="{{ url_for('learn_stage', movie_key=movie_key, stage_num=stage_num - 1) }}">← Previous</a>
        {% endif %}
        {% if stage_num < 12 %}
            <a href="{{ url_for('learn_stage', movie_key=movie_key, stage_num=stage_num + 1) }}">Next →</a>
        {% endif %}
    </div>
</div>
{% endblock %}