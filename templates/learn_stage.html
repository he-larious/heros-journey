{% extends "base.html" %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/learn_stage.css') }}">
{% endblock %}

{% block content %}
<div class="stage-container">
  <div class="stage-card">
    <h2 class="stage-title">Stage {{ stage_num }}: {{ stage_name }}</h2>
    <p class="stage-description"><em>{{ stage_description }}</em></p>

    <div class="media">
      {% if stage.media_type == "video" %}
        <div class="responsive-video">
          <iframe
            src="https://www.youtube.com/embed/{{ stage.video_id }}?start={{ stage.start }}&end={{ stage.end }}&rel=0"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>
      {% elif stage.media_type == "image" %}
        <img src="{{ stage.media_url }}" alt="{{ stage.name }}" class="responsive-img">
      {% endif %}
    </div>

    <p class="caption">{{ stage.caption }}</p>

    <a href="{{ url_for('learn_diagram', movie_key=movie_key) }}" class="back-to-diagram">‚Üê Back to Diagram</a>
  </div>
</div>
{% endblock %}